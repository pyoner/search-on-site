<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Search Preview</title>
        <style>
            body {
                background-color: #fff;
                margin: 0;
            }
            .s-box {
                position:fixed;
                top: 0;
                background-color: #fff;
                padding: 4px 4px 0;
                z-index: 9999;
            }
            .s-results {
                margin-top: 20px;
            }
        </style>
    </head>
    <body>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.18.1/URI.min.js"></script>
        <script>
        (function() {
            var url = new URI();
            var q = url.query(true) || {};

            function initSearch() {
                var attrs = {};

                if (!q.site_url && q.as_sitesearch) {
                    attrs.as_sitesearch = q.as_sitesearch;
                }

                google.search.cse.element.render({
                    div: 'searchbox',
                    tag: 'searchbox',
                    attributes: attrs 
                }, {
                    div: 'searchresults',
                    tag: 'searchresults',
                    attributes: {
                        linkTarget: q['linkTarget'] || '_blank'
                    }
                });
                
                var input = document.body.querySelector('input[type="text"]');
                if (input) {input.focus()}
            }
            function init() {
                if (document.readyState == "complete") {
                    initSearch();
                } else {
                    google.setOnLoadCallback(initSearch);
                }
            }
            window.__gcse = {
                parsetags: 'explicit',
                callback: init
            };

            var cx = '010757224930445905488:hydkhs9fcca';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;

            if (q.site_url) {
                cref =
                    'https://script.google.com/macros/s/AKfycbyQ4EAcyF2gYZUNIc4TAbNRc2bfXwHRdkMhsxM4vX36_jeuPbR4/exec?url='
                    + encodeURIComponent(q.site_url);
                gcse.src = 'https://cse.google.com/cse.js?cref=' + cref;
            } else {
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            }
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
        })();
        </script>
        
        <div class="s-box"><div id="searchbox"></div></div>
        <div class="s-results">
            <div id="searchresults"></div>
        </div>
    </body>
</html>
